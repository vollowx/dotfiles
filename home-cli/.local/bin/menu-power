#!/usr/bin/env bash
set -Eeuo pipefail

need swaylock swaymsg suspend hibernate loginctl reboot shutdown

choice="$(echo -e "lock\nexit\nsuspend\nhibernate\nlogout\nreboot\nshutdown" | ${1:-fzf} --prompt 'power> ')"

[[ -z "$choice" ]] && exit

case "$choice" in
"lock")
  swaylock
  ;;
"exit")
  swaymsg exit
  ;;
"logout")
  loginctl terminate-user $USER
  ;;
"shutdown")
  shutdown -h now
  ;;
*)
  exec $choice
  ;;
esac
